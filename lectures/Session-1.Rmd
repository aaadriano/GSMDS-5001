---
title: "Foundations of Data Science with R"
author: "Jameson Watts, Ph.D."
output:
  ioslides_presentation: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## Agenda

1. Course Overview and Expectations
2. Example Analysis of Wine Prices

# Course Overview and Expectations

## Contact Information
- Email: jwatts\@willamette.edu
- Office Hours: after class 
- Appointments: jamesonwatts.youcanbook.me (Skype or phone call)

## Class Materials

- [Base R](https://cran.r-project.org/)
- [RStudio 1.2](https://www.rstudio.com/products/rstudio/download)
- [R for Data Science](https://r4ds.had.co.nz)
- [DataCamp Classroom](https://www.datacamp.com/groups/shared_links/526ee016c61b2912b2bbc7a2f7fd1f1cf1ea3d09)

Other resources:

- https://twitter.com/r4dscommunity
- https://bookdown.org/yihui/rmarkdown
- http://google.com

## Reading the Course Outline

- From the [syllabus](https://github.com/jamesonwatts/GSMDS-5001/blob/master/syllabus/syllabus.pdf)
- Class Topics
  + Subjects I plan to cover during that day's lecture
- Reading and Assignments
  + DCC: assignments in the DataCamp Classroom
  + R4ds: chapters to read in the online textbook
  
## Assignments
- DataCamp homework assignments (25%)
- Midterm exams (50%)
- Final Presentations and Report (25%)

## Course Policies and Expectations
- Name tents
- Collaboration
- Late work
- Effort
  + 2-4 hours outside of class each week
  + struggle, Google, StackExchange, struggle, Google, doh!
  + start with the basics... ramp up very fast

# Analysis of wine prices

## Overview of Data

- Grabbed from Kaggle [here](https://www.kaggle.com/zynicide/wine-reviews/)
- Scrape of wine reviews, scores, and prices from Wine Enthusiast during week of 6/15/2017
- Includes region, taster's name, variety and winery
- 130k observations
- Some background reading [here](https://www.vivino.com/wine-news/how-much-does-a-good-bottle-of-wine-cost)

## Summarize Dataset

```{r, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
library(tidyverse)
wine <- as_tibble(read_csv('../resources/winemag-data.csv'))
wine <- wine %>% 
  rename(id=X1)
```

```{r}
glimpse(wine)
```

## Possible Research Questions

- What is the mean rating and cost of a bottle of red wine? 
  + What is the median? 
  + What about white wine?
- Is wine from the Willamette Valley more or less expensive than wine from elsewhere?
  + Against which regions do we have a comparative advantage?
  + Where are we at a disadvantage?
- Do the most prolific tasters have a preference for a certain region or type of wine?
- What is the relationship between rating and price? Are there confounds?
- Are there certain words always associated with the highest rated wine?
- Which wines are a 'good' deal?

## Wine Prices (< $200) Histogram

```{r, echo=FALSE, warning=FALSE}
wine  %>%
  filter(country == "US" | country =="France" | country == "Italy") %>% 
  filter(price < 200) %>% 
  ggplot(aes(x=price)) +
  geom_histogram(bins = 20) +
  facet_wrap(~ country, scales = "free")
```

## Wine Prices (< $200) Density 

```{r, echo=FALSE, warning=FALSE}
wine  %>%
  filter(country == "US" | country =="France" | country == "Italy") %>% 
  filter(price < 200) %>% 
  ggplot(aes(x=price, fill=country)) +
  geom_density(alpha = 0.3)
```
## Wine ln(Prices) Density 
```{r, echo=FALSE, warning=FALSE}
wine  %>%
  filter(country == "US" | country =="France" | country == "Italy") %>% 
  ggplot(aes(x=log2(price), fill=country)) +
  geom_density(alpha = 0.3)
```


## Means and Medians
```{r, echo=FALSE, warning=FALSE}

wine  %>%
  filter(country == "US" | country =="France" | country == "Italy") %>%
  ggplot(aes(x=country, y=log2(price))) + 
    geom_boxplot() + 
    coord_flip()
```


## Oregon vs. California vs. Bordeaux Ratings

```{r, echo=FALSE, warning=FALSE}
library(cowplot)

prov_wine <- wine  %>%
  filter(province == "Bordeaux" | province == "Oregon" | province == "California")

p1<- ggplot(prov_wine, aes(x=province, y=points)) + 
  geom_boxplot() + 
  coord_flip()

p2<- ggplot(prov_wine, aes(x=points, fill=province)) +
  geom_density(alpha = 0.3)+
  theme(legend.position = c(0.8, 0.8))

plot_grid(p1,p2)
```
